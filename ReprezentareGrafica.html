<!DOCTYPE html>
<html>

<body>

    <canvas id="myCanvas" width="1000" height="1000" style="border:1px solid blue;"> </canvas>

    <input type="file" name="file" id="file">
    <script>
        document.getElementById('file').onchange = function() {

            var file = this.files[0];

            var reader = new FileReader();
            reader.onload = function(progressEvent) {

                // By lines
                var lines = this.result.split('\n');
                console.log("Sunt", parseInt(lines[0], 10), "linii");
                var firstLine = lines[1].split(" ");
                var firstLineCopy = firstLine;
                console.log(firstLine);

                for (var lineNumber = 2; lineNumber < lines.length - 1; lineNumber++) {
                    ctx.beginPath();
                    var thisLine = lines[lineNumber].split(" ");
                    console.log("linia", thisLine);
                    console.log(thisLine[0]);
                    console.log(thisLine[1]);
                    ctx.beginPath();
                    ctx.arc(center + parseInt(firstLine[0], 10) * unitate, center - parseInt(firstLine[1], 10) * unitate, 3, 0, 2 * Math.PI);
                    ctx.fillStyle = "red";
                    ctx.strokeStyle = "red";
                    ctx.fill();
                    ctx.stroke();
                    ctx.beginPath();
                    ctx.arc(center + parseInt(thisLine[0], 10) * unitate, center - parseInt(thisLine[1], 10) * unitate, 3, 0, 2 * Math.PI);
                    ctx.fillStyle = "red";
                    ctx.strokeStyle = "red";
                    ctx.fill();
                    ctx.stroke();
                    ctx.moveTo(center + parseInt(firstLine[0], 10) * unitate, center - parseInt(firstLine[1], 10) * unitate);
                    ctx.lineTo(center + parseInt(thisLine[0], 10) * unitate, center - parseInt(thisLine[1], 10) * unitate);
                    ctx.strokeStyle = "green";
                    ctx.stroke();
                    firstLine = thisLine;
                }
                ctx.moveTo(center + parseInt(firstLine[0], 10) * unitate, center - parseInt(firstLine[1], 10) * unitate);
                ctx.lineTo(center + parseInt(firstLineCopy[0], 10) * unitate, center - parseInt(firstLineCopy[1], 10) * unitate);
                ctx.strokeStyle = "green";
                ctx.stroke();
                ctx.beginPath();
                ctx.arc(center + parseInt(firstLineCopy[0], 10) * unitate, center - parseInt(firstLineCopy[1], 10) * unitate, 3, 0, 2 * Math.PI);
                ctx.fillStyle = "red";
                ctx.strokeStyle = "red";
                ctx.fill();
                ctx.stroke();
                ctx.beginPath();
                ctx.arc(center + parseInt(firstLine[0], 10) * unitate, center - parseInt(firstLine[1], 10) * unitate, 3, 0, 2 * Math.PI);
                ctx.fillStyle = "red";
                ctx.strokeStyle = "red";
                ctx.fill();
                ctx.stroke();



                var linePoint = lines[1 + parseInt(lines[0], 10)].split(" ");
                console.log("aici", linePoint[0]);

                ctx.beginPath();
                ctx.arc(center + parseInt(linePoint[0], 10) * unitate, center - parseInt(linePoint[1], 10) * unitate, 5, 0, 2 * Math.PI);
                ctx.fillStyle = "black";
                ctx.strokeStyle = "black";
                ctx.fill();
                ctx.stroke();
            };
            reader.readAsText(file);
        };
        var canvas = document.getElementById("myCanvas");


        var width = canvas.width;
        var height = canvas.height;

        var center = width / 2;
        var unitate = 70;
        var ctx = canvas.getContext("2d");

        ctx.moveTo(0, height / 2);
        ctx.lineTo(width, height / 2);
        ctx.strokeStyle = "blue";
        ctx.stroke();

        ctx.moveTo(width / 2, 0);
        ctx.lineTo(width / 2, height);
        ctx.strokeStyle = "blue";
        ctx.stroke();
    </script>

</body>

</html>